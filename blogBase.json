{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "", "title": "Blog Title", "subTitle": "Blog description", "avatarUrl": "https://github.githubassets.com/favicons/favicon.svg", "GMEEK_VERSION": "last", "postListJson": {"P2": {"htmlDir": "docs/post/you-xiu-yun-wei-jiao-ben.html", "labels": ["documentation"], "postTitle": "\u4f18\u79c0\u8fd0\u7ef4\u811a\u672c", "postUrl": "post/you-xiu-yun-wei-jiao-ben.html", "postSourceUrl": "https://github.com/ignorantcaomao/ignorantcaomao.github.io/issues/2", "commentNum": 0, "wordCount": 6168, "description": "### \u6839\u636ePID\u8fc7\u6ee4\u8fdb\u7a0b\u6240\u6709\u4fe1\u606f\r\n```shell\r\n#! /bin/bash\r\n# Function: \u6839\u636e\u7528\u6237\u8f93\u5165\u7684PID\uff0c\u8fc7\u6ee4\u51fa\u8be5PID\u6240\u6709\u7684\u4fe1\u606f\r\nread -p '\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u7684PID: ' P\r\nn=`ps -aux| awk '$2~/^'$P'$/{print $11}'|wc -l`\r\nif [ $n -eq 0 ];then\r\n echo '\u8be5PID\u4e0d\u5b58\u5728\uff01\uff01'\r\n exit\r\nfi\r\necho '--------------------------------'\r\necho '\u8fdb\u7a0bPID: $P'\r\necho '\u8fdb\u7a0b\u547d\u4ee4\uff1a`ps -aux| awk '$2~/^'$P'$/{print $11}'`'\r\necho '\u8fdb\u7a0b\u6240\u5c5e\u7528\u6237: `ps -aux| awk '$2~/^'$P'$/{print $1}'`'\r\necho 'CPU\u5360\u7528\u7387\uff1a`ps -aux| awk '$2~/^'$P'$/{print $3}'`%'\r\necho '\u5185\u5b58\u5360\u7528\u7387\uff1a`ps -aux| awk '$2~/^'$P'$/{print $4}'`%'\r\necho '\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c\u7684\u65f6\u523b\uff1a`ps -aux| awk '$2~/^'$P'$/{print $9}'`'\r\necho '\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u95f4\uff1a`ps -aux| awk '$2~/^'$P'$/{print $10}'`'\r\necho '\u8fdb\u7a0b\u72b6\u6001\uff1a`ps -aux| awk '$2~/^'$P'$/{print $8}'`'\r\necho '\u8fdb\u7a0b\u865a\u62df\u5185\u5b58\uff1a`ps -aux| awk '$2~/^'$P'$/{print $5}'`'\r\necho '\u8fdb\u7a0b\u5171\u4eab\u5185\u5b58\uff1a`ps -aux| awk '$2~/^'$P'$/{print $6}'`'\r\necho '--------------------------------'\r\n```\r\n### \u6839\u636e\u8fdb\u7a0b\u540d\u8fc7\u6ee4\u8fdb\u7a0b\u4fe1\u606f\r\n\r\n```shell\r\n#! /bin/bash\r\n# Function: \u6839\u636e\u8f93\u5165\u7684\u7a0b\u5e8f\u7684\u540d\u5b57\u8fc7\u6ee4\u51fa\u6240\u5bf9\u5e94\u7684PID\uff0c\u5e76\u663e\u793a\u51fa\u8be6\u7ec6\u4fe1\u606f\uff0c\u5982\u679c\u6709\u51e0\u4e2aPID\uff0c\u5219\u5168\u90e8\u663e\u793a\r\nread -p '\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u7684\u8fdb\u7a0b\u540d\uff1a' NAME\r\nN=`ps -aux | grep $NAME | grep -v grep | wc -l` ##\u7edf\u8ba1\u8fdb\u7a0b\u603b\u6570\r\nif [ $N -le 0 ];then\r\n  echo '\u8be5\u8fdb\u7a0b\u540d\u6ca1\u6709\u8fd0\u884c\uff01'\r\nfi\r\ni=1\r\nwhile [ $N -gt 0 ]\r\ndo\r\n  echo '\u8fdb\u7a0bPID: `ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $2}'`'\r\n  echo '\u8fdb\u7a0b\u547d\u4ee4\uff1a`ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $11}'`'\r\n  echo '\u8fdb\u7a0b\u6240\u5c5e\u7528\u6237: `ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $1}'`'\r\n  echo 'CPU\u5360\u7528\u7387\uff1a`ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $3}'`%'\r\n  echo '\u5185\u5b58\u5360\u7528\u7387\uff1a`ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $4}'`%'\r\n  echo '\u8fdb\u7a0b\u5f00\u59cb\u8fd0\u884c\u7684\u65f6\u523b\uff1a`ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $9}'`'\r\n  echo '\u8fdb\u7a0b\u8fd0\u884c\u7684\u65f6\u95f4\uff1a` ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $11}'`'\r\n  echo '\u8fdb\u7a0b\u72b6\u6001\uff1a`ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $8}'`'\r\n  echo '\u8fdb\u7a0b\u865a\u62df\u5185\u5b58\uff1a`ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $5}'`'\r\n  echo '\u8fdb\u7a0b\u5171\u4eab\u5185\u5b58\uff1a`ps -aux | grep $NAME | grep -v grep | awk 'NR=='$i'{print $0}'| awk '{print $6}'`'\r\n  echo '***************************************************************'\r\n  let N-- i++\r\ndone\r\n```\r\n### \u6839\u636e\u7528\u6237\u540d\u67e5\u8be2\u8be5\u7528\u6237\u7684\u76f8\u5173\u4fe1\u606f\r\n\r\n```shell\r\n#! /bin/bash\r\n# Function\uff1a\u6839\u636e\u7528\u6237\u540d\u67e5\u8be2\u8be5\u7528\u6237\u7684\u6240\u6709\u4fe1\u606f\r\nread -p '\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u7684\u7528\u6237\u540d\uff1a' A\r\necho '------------------------------'\r\nn=`cat /etc/passwd | awk -F: '$1~/^'$A'$/{print}' | wc -l`\r\nif [ $n -eq 0 ];then\r\necho '\u8be5\u7528\u6237\u4e0d\u5b58\u5728'\r\necho '------------------------------'\r\nelse\r\n  echo '\u8be5\u7528\u6237\u7684\u7528\u6237\u540d\uff1a$A'\r\n  echo '\u8be5\u7528\u6237\u7684UID\uff1a`cat /etc/passwd | awk -F: '$1~/^'$A'$/{print}'|awk -F: '{print $3}'`'\r\n  echo '\u8be5\u7528\u6237\u7684\u7ec4\u4e3a\uff1a`id $A | awk {'print $3'}`'\r\n  echo '\u8be5\u7528\u6237\u7684GID\u4e3a\uff1a`cat /etc/passwd | awk -F: '$1~/^'$A'$/{print}'|awk -F: '{print $4}'`'\r\n  echo '\u8be5\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e3a\uff1a`cat /etc/passwd | awk -F: '$1~/^'$A'$/{print}'|awk -F: '{print $6}'`'\r\n  Login=`cat /etc/passwd | awk -F: '$1~/^'$A'$/{print}'|awk -F: '{print $7}'`\r\n  if [ $Login == '/bin/bash' ];then\r\n  echo '\u8be5\u7528\u6237\u6709\u767b\u5f55\u7cfb\u7edf\u7684\u6743\u9650\uff01\uff01'\r\n  echo '------------------------------'\r\n  elif [ $Login == '/sbin/nologin' ];then\r\n  echo '\u8be5\u7528\u6237\u6ca1\u6709\u767b\u5f55\u7cfb\u7edf\u7684\u6743\u9650\uff01\uff01'\r\n  echo '------------------------------'\r\n  fi\r\nfi\r\n```\r\n### \u52a0\u56fa\u7cfb\u7edf\u7684\u4e00\u4e9b\u914d\u7f6e\r\n\r\n```shell\r\n#! /bin/bash\r\n# Function:\u5bf9\u8d26\u6237\u7684\u5bc6\u7801\u7684\u4e00\u4e9b\u52a0\u56fa\r\nread -p '\u8bbe\u7f6e\u5bc6\u7801\u6700\u591a\u53ef\u591a\u5c11\u5929\u4e0d\u4fee\u6539\uff1a' A\r\nread -p '\u8bbe\u7f6e\u5bc6\u7801\u4fee\u6539\u4e4b\u95f4\u6700\u5c0f\u7684\u5929\u6570\uff1a' B\r\nread -p '\u8bbe\u7f6e\u5bc6\u7801\u6700\u77ed\u7684\u957f\u5ea6\uff1a' C\r\nread -p '\u8bbe\u7f6e\u5bc6\u7801\u5931\u6548\u524d\u591a\u5c11\u5929\u901a\u77e5\u7528\u6237\uff1a' D\r\nsed -i '/^PASS_MAX_DAYS/c\\PASS_MAX_DAYS '$A'' /etc/login.defs\r\nsed -i '/^PASS_MIN_DAYS/c\\PASS_MIN_DAYS '$B'' /etc/login.defs\r\nsed -i '/^PASS_MIN_LEN/c\\PASS_MIN_LEN '$C'' /etc/login.defs\r\nsed -i '/^PASS_WARN_AGE/c\\PASS_WARN_AGE '$D'' /etc/login.defs\r\n\r\necho '\u5df2\u5bf9\u5bc6\u7801\u8fdb\u884c\u52a0\u56fa\uff0c\u65b0\u7528\u6237\u4e0d\u5f97\u548c\u65e7\u5bc6\u7801\u76f8\u540c\uff0c\u4e14\u65b0\u5bc6\u7801\u5fc5\u987b\u540c\u65f6\u5305\u542b\u6570\u5b57\u3001\u5c0f\u5199\u5b57\u6bcd\uff0c\u5927\u5199\u5b57\u6bcd\uff01\uff01'\r\nsed -i '/pam_pwquality.so/c\\password requisite pam_pwquality.so try_first_pass local_users_only retry=3 authtok_type= difok=1 minlen=8 ucredit=-1 lcredit=-1 dcredit=-1' /etc/pam.d/system-auth\r\n\r\necho '\u5df2\u5bf9\u5bc6\u7801\u8fdb\u884c\u52a0\u56fa\uff0c\u5982\u679c\u8f93\u5165\u9519\u8bef\u5bc6\u7801\u8d85\u8fc73\u6b21\uff0c\u5219\u9501\u5b9a\u8d26\u6237\uff01\uff01'\r\nn=`cat /etc/pam.d/sshd | grep 'auth required pam_tally2.so '|wc -l`\r\nif [ $n -eq 0 ];then\r\nsed -i '/%PAM-1.0/a\\auth required pam_tally2.so deny=3 unlock_time=150 even_deny_root root_unlock_time300' /etc/pam.d/sshd\r\nfi\r\n\r\necho  '\u5df2\u8bbe\u7f6e\u7981\u6b62root\u7528\u6237\u8fdc\u7a0b\u767b\u5f55\uff01\uff01'\r\nsed -i '/PermitRootLogin/c\\PermitRootLogin no'  /etc/ssh/sshd_config\r\n\r\nread -p '\u8bbe\u7f6e\u5386\u53f2\u547d\u4ee4\u4fdd\u5b58\u6761\u6570\uff1a' E\r\nread -p '\u8bbe\u7f6e\u8d26\u6237\u81ea\u52a8\u6ce8\u9500\u65f6\u95f4\uff1a' F\r\nsed -i '/^HISTSIZE/c\\HISTSIZE='$E'' /etc/profile\r\nsed -i '/^HISTSIZE/a\\TMOUT='$F'' /etc/profile\r\n\r\necho '\u5df2\u8bbe\u7f6e\u53ea\u5141\u8bb8wheel\u7ec4\u7684\u7528\u6237\u53ef\u4ee5\u4f7f\u7528su\u547d\u4ee4\u5207\u6362\u5230root\u7528\u6237\uff01'\r\nsed -i '/pam_wheel.so use_uid/c\\auth required pam_wheel.so use_uid ' /etc/pam.d/su\r\nn=`cat /etc/login.defs | grep SU_WHEEL_ONLY | wc -l`\r\nif [ $n -eq 0 ];then\r\necho SU_WHEEL_ONLY yes >> /etc/login.defs\r\nfi\r\n\r\necho '\u5373\u5c06\u5bf9\u7cfb\u7edf\u4e2d\u7684\u8d26\u6237\u8fdb\u884c\u68c0\u67e5....'\r\necho '\u7cfb\u7edf\u4e2d\u6709\u767b\u5f55\u6743\u9650\u7684\u7528\u6237\u6709\uff1a'\r\nawk -F: '($7=='/bin/bash'){print $1}' /etc/passwd\r\necho '********************************************'\r\necho '\u7cfb\u7edf\u4e2dUID=0\u7684\u7528\u6237\u6709\uff1a'\r\nawk -F: '($3=='0'){print $1}' /etc/passwd\r\necho '********************************************'\r\nN=`awk -F: '($2==''){print $1}' /etc/shadow|wc -l`\r\necho '\u7cfb\u7edf\u4e2d\u7a7a\u5bc6\u7801\u7528\u6237\u6709\uff1a$N'\r\nif [ $N -eq 0 ];then\r\n echo '\u606d\u559c\u4f60\uff0c\u7cfb\u7edf\u4e2d\u65e0\u7a7a\u5bc6\u7801\u7528\u6237\uff01\uff01'\r\n echo '********************************************'\r\nelse\r\n i=1\r\n while [ $N -gt 0 ]\r\n do\r\n    None=`awk -F: '($2==''){print $1}' /etc/shadow|awk 'NR=='$i'{print}'`\r\n    echo '------------------------'\r\n    echo $None\r\n    echo '\u5fc5\u987b\u4e3a\u7a7a\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\uff01\uff01'\r\n    passwd $None\r\n    let N--\r\n done\r\n M=`awk -F: '($2==''){print $1}' /etc/shadow|wc -l`\r\n if [ $M -eq 0 ];then\r\n  echo '\u606d\u559c\uff0c\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u6ca1\u6709\u7a7a\u5bc6\u7801\u7528\u6237\u4e86\uff01'\r\n else\r\necho '\u7cfb\u7edf\u4e2d\u8fd8\u5b58\u5728\u7a7a\u5bc6\u7801\u7528\u6237\uff1a$M'\r\n fi\r\nfi\r\n\r\necho '\u5373\u5c06\u5bf9\u7cfb\u7edf\u4e2d\u91cd\u8981\u6587\u4ef6\u8fdb\u884c\u9501\u5b9a\uff0c\u9501\u5b9a\u540e\u5c06\u65e0\u6cd5\u6dfb\u52a0\u5220\u9664\u7528\u6237\u548c\u7ec4'\r\nread -p '\u8b66\u544a\uff1a\u6b64\u811a\u672c\u8fd0\u884c\u540e\u5c06\u65e0\u6cd5\u6dfb\u52a0\u5220\u9664\u7528\u6237\u548c\u7ec4\uff01\uff01\u786e\u5b9a\u8f93\u5165Y\uff0c\u53d6\u6d88\u8f93\u5165N\uff1bY/N\uff1a' i\r\ncase $i in\r\n      [Y,y])\r\n            chattr +i /etc/passwd\r\n            chattr +i /etc/shadow\r\n            chattr +i /etc/group\r\n            chattr +i /etc/gshadow\r\n            echo '\u9501\u5b9a\u6210\u529f\uff01'\r\n;;\r\n      [N,n])\r\n            chattr -i /etc/passwd\r\n            chattr -i /etc/shadow\r\n            chattr -i /etc/group\r\n            chattr -i /etc/gshadow\r\n            echo '\u53d6\u6d88\u9501\u5b9a\u6210\u529f\uff01\uff01'\r\n;;\r\n       *)\r\n            echo '\u8bf7\u8f93\u5165Y/y or N/n'\r\nesac\r\n```\r\n\r\n### ssh \u8fdc\u7a0b\u8fde\u63a5\u514d\u8f93\u5bc6\u7801\r\n```shell\r\n#!/bin/bash\r\n \r\n# \u5b89\u88c5sshpass\u5de5\u5177\r\nyum install -y sshpass\r\n\r\n# \u76ee\u6807\u670d\u52a1\u5668\u7684IP\u5730\u5740\u6216\u4e3b\u673a\u540d\r\nHOST='192.168.3.55'\r\n# \u767b\u5f55\u7528\u6237\u540d\r\nUSER='root'\r\n# \u767b\u5f55\u5bc6\u7801\r\nPASS='1-techstar'\r\n# \u8981\u6267\u884c\u7684\u547d\u4ee4\r\nCOMMAND='ls'\r\n \r\n# \u4f7f\u7528sshpass\u6267\u884cSSH\u547d\u4ee4\r\nsshpass -p $PASS ssh -o StrictHostKeyChecking=no -p 22 $USER@$HOST $COMMAND\r\n```\u3002", "top": 0, "createdAt": 1728545593, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-10-10", "dateLabelColor": "#bc4c00"}, "P3": {"htmlDir": "docs/post/zhan-dian-ke-kao-xing-gong-cheng- SRE -zui-jia-shi-jian- -- -huang-jin-jian-kong-xin-hao.html", "labels": ["documentation"], "postTitle": "\u7ad9\u70b9\u53ef\u9760\u6027\u5de5\u7a0b SRE \u6700\u4f73\u5b9e\u8df5 -- \u9ec4\u91d1\u76d1\u63a7\u4fe1\u53f7", "postUrl": "post/zhan-dian-ke-kao-xing-gong-cheng-%20SRE%20-zui-jia-shi-jian-%20--%20-huang-jin-jian-kong-xin-hao.html", "postSourceUrl": "https://github.com/ignorantcaomao/ignorantcaomao.github.io/issues/3", "commentNum": 0, "wordCount": 4473, "description": "```python\r\nfrom fastapi import FastAPI, Request, HTTPException, Response\r\nfrom prometheus_client import Counter, Gauge, Histogram, generate_latest, CONTENT_TYPE_LATEST\r\nfrom starlette.responses import StreamingResponse\r\nimport time\r\nimport psutil\r\n\r\napp = FastAPI()\r\n\r\n# Define Prometheus metrics\r\nhttp_requests_total = Counter(\r\n    'http_requests_total',\r\n    'Total number of HTTP requests',\r\n    ['method', 'endpoint', 'http_status']\r\n)\r\nhttp_request_duration_seconds = Histogram(\r\n    'http_request_duration_seconds',\r\n    'HTTP request duration in seconds',\r\n    ['method', 'endpoint']\r\n)\r\nhttp_request_size_bytes = Histogram(\r\n    'http_request_size_bytes',\r\n    'HTTP request size in bytes',\r\n    ['method', 'endpoint']\r\n)\r\nhttp_response_size_bytes = Histogram(\r\n    'http_response_size_bytes',\r\n    'HTTP response size in bytes',\r\n    ['method', 'endpoint']\r\n)\r\nactive_requests = Gauge(\r\n    'active_requests',\r\n    'Number of active requests'\r\n)\r\nerror_counter = Counter(\r\n    'error_counter',\r\n    'Total number of HTTP errors',\r\n    ['method', 'endpoint', 'http_status']\r\n)\r\n\r\ncpu_usage = Gauge('cpu_usage_percent', 'CPU usage in percent')\r\nmemory_usage = Gauge('memory_usage_percent', 'Memory usage in percent')\r\ndisk_usage = Gauge('disk_usage_percent', 'Disk usage in percent')\r\nnetwork_in = Gauge('network_received_bytes', 'Network received bytes')\r\nnetwork_out = Gauge('network_sent_bytes', 'Network sent bytes')\r\n\r\n@app.middleware('http')\r\nasync def record_request_start_time(request: Request, call_next):\r\n    request.state.start_time = time.time()\r\n    response = await call_next(request)\r\n    return response\r\n\r\n@app.middleware('http')\r\nasync def record_request_end_time(request: Request, call_next):\r\n    response = await call_next(request)\r\n    latency = time.time() - request.state.start_time\r\n    http_request_duration_seconds.labels(\r\n        request.method, request.url.path\r\n    ).observe(latency)\r\n    http_request_size_bytes.labels(\r\n        request.method, request.url.path\r\n    ).observe(request.headers.get('Content-Length', 0))\r\n    if isinstance(response, StreamingResponse):\r\n        response_size = 0\r\n    else:\r\n        response_size = len(response.content)\r\n    http_response_size_bytes.labels(\r\n        request.method, request.url.path\r\n    ).observe(response_size)\r\n    http_requests_total.labels(\r\n        request.method, request.url.path, response.status_code\r\n    ).inc()\r\n    return response\r\n\r\n@app.middleware('http')\r\nasync def increment_counter(request: Request, call_next):\r\n    active_requests.inc()\r\n    response = await call_next(request)\r\n    active_requests.dec()\r\n    return response\r\n\r\n@app.middleware('http')\r\nasync def log_saturation(request: Request, call_next):\r\n    max_concurrent_requests = 10  # set the maximum number of concurrent requests\r\n    saturation_ratio = active_requests._value._value / max_concurrent_requests\r\n    print(f'Saturation: {saturation_ratio}')\r\n    return await call_next(request)\r\n\r\n@app.middleware('http')\r\nasync def increment_error_counter(request: Request, call_next):\r\n    try:\r\n        response = await call_next(request)\r\n        return response\r\n    except HTTPException as e:\r\n        error_counter.labels(\r\n            request.method, request.url.path, e.status_code\r\n        ).inc()\r\n        print(f'Incremented error counter for {request.method} {request.url.path} {e.status_code}')\r\n        raise e\r\n\r\n\r\n@app.get('/')\r\nasync def root():\r\n    return {'message': 'FastAPI server is running. Metrics are available at /metrics'}\r\n\r\n\r\n@app.get('/generate_traffic')\r\nasync def generate_traffic():\r\n    for i in range(100):\r\n        response = await root()\r\n        print(response)\r\n    return {'message': 'Generated traffic successfully.'}\r\n\r\n\r\n@app.get('/generate_error')\r\nasync def generate_error():\r\n    raise HTTPException(status_code=500, detail='Generated an error.')\r\n\r\n# \u83b7\u53d6\u548c\u66f4\u65b0\u7cfb\u7edf\u76d1\u63a7\u6570\u636e\r\ndef collect_system_metrics():\r\n    # \u66f4\u65b0 CPU \u4f7f\u7528\u7387\r\n    cpu_usage.set(psutil.cpu_percent(interval=1))\r\n    \r\n    # \u66f4\u65b0\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\r\n    memory = psutil.virtual_memory()\r\n    memory_usage.set(memory.percent)\r\n    \r\n    # \u66f4\u65b0\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5\r\n    disk = psutil.disk_usage('/')\r\n    disk_usage.set(disk.percent)\r\n    \r\n    # \u66f4\u65b0\u7f51\u7edc\u6d41\u91cf\r\n    net_io = psutil.net_io_counters()\r\n    network_in.set(net_io.bytes_recv)\r\n    network_out.set(net_io.bytes_sent)\r\n\r\n@app.get('/metrics')\r\nasync def metrics():\r\n    collect_system_metrics()\r\n    return Response(content=generate_latest(), media_type=CONTENT_TYPE_LATEST)\r\n```\r\n\u3002", "top": 0, "createdAt": 1731491402, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-11-13", "dateLabelColor": "#bc4c00"}, "P4": {"htmlDir": "docs/post/docker-compose -bu-shu-pei-zhi-mysql -zhu-cong.html", "labels": ["documentation"], "postTitle": "docker-compose \u90e8\u7f72\u914d\u7f6emysql \u4e3b\u4ece", "postUrl": "post/docker-compose%20-bu-shu-pei-zhi-mysql%20-zhu-cong.html", "postSourceUrl": "https://github.com/ignorantcaomao/ignorantcaomao.github.io/issues/4", "commentNum": 0, "wordCount": 3877, "description": "\u4f7f\u7528 **Docker Compose** \u642d\u5efa **MySQL \u4e3b\u4ece\u590d\u5236**\u662f\u4e00\u79cd\u5feb\u901f\u3001\u9ad8\u6548\u7684\u65b9\u5f0f\u3002", "top": 0, "createdAt": 1732244220, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-11-22", "dateLabelColor": "#bc4c00"}, "P5": {"htmlDir": "docs/post/k8s -wen-ti-pai-cha-liu-cheng-tu.html", "labels": ["documentation"], "postTitle": "k8s \u95ee\u9898\u6392\u67e5\u6d41\u7a0b\u56fe", "postUrl": "post/k8s%20-wen-ti-pai-cha-liu-cheng-tu.html", "postSourceUrl": "https://github.com/ignorantcaomao/ignorantcaomao.github.io/issues/5", "commentNum": 0, "wordCount": 105, "description": "![\u5fae\u4fe1\u56fe\u7247_20241204101902](https://github.com/user-attachments/assets/0f06e502-0029-45af-bacb-8956f50359e2)\r\n\u3002", "top": 0, "createdAt": 1733278794, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-12-04", "dateLabelColor": "#bc4c00"}, "P6": {"htmlDir": "docs/post/11 -ge-bi-bei- Docker -gong-ju.html", "labels": ["documentation"], "postTitle": "11 \u4e2a\u5fc5\u5907 Docker \u5de5\u5177", "postUrl": "post/11%20-ge-bi-bei-%20Docker%20-gong-ju.html", "postSourceUrl": "https://github.com/ignorantcaomao/ignorantcaomao.github.io/issues/6", "commentNum": 0, "wordCount": 49, "description": "https://mp.weixin.qq.com/s/pjvjTXhcrON0FdAak1pxWw\u3002", "top": 0, "createdAt": 1733279590, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-12-04", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"bug": "#d73a4a", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "question": "#d876e3", "wontfix": "#ffffff"}, "displayTitle": "Blog Title", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://ignorantcaomao.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}